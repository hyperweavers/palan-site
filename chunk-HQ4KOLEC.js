import{a as r}from"./chunk-33UJJMDS.js";import{C as l,K as S,cc as g,ea as h,ka as m,l as a}from"./chunk-ZG3MT3EK.js";var o=function(e){return e.LIGHT="light",e.DARK="dark",e.SYSTEM="system",e}(o||{}),i=function(e){return e.LIGHT="light",e.DARK="dark",e}(i||{}),n=function(e){return e[e.FIFTEEN_SECONDS=15e3]="FIFTEEN_SECONDS",e[e.THIRTY_SECONDS=3e4]="THIRTY_SECONDS",e[e.ONE_MINUTE=6e4]="ONE_MINUTE",e}(n||{});var C=(()=>{class e{document;DEFAULT_SETTINGS={theme:o.SYSTEM,colorScheme:i.DARK,refreshInterval:n.THIRTY_SECONDS};settings$;resize$;settingsSubject$;constructor(t){this.document=t;let s=this.getTheme(),c=this.getColorScheme(),T=this.getRefreshInterval();this.applyTheme(s),this.settingsSubject$=new a({theme:s,colorScheme:c,refreshInterval:T}),this.settings$=this.settingsSubject$.asObservable(),this.resize$=l(window,"resize").pipe(S(500)),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:E})=>{this.getTheme()===o.SYSTEM&&(this.applyTheme(E?o.DARK:o.LIGHT),this.settingsSubject$.next({theme:this.getTheme(),colorScheme:this.getColorScheme(),refreshInterval:this.getRefreshInterval()}))})}setTheme(t){t&&Object.values(o).includes(t)&&localStorage&&(localStorage.setItem(r.settings.THEME,t),this.applyTheme(t),this.settingsSubject$.next({theme:t,colorScheme:this.getColorScheme(),refreshInterval:this.getRefreshInterval()}))}setRefreshInterval(t){t&&!isNaN(Number(t))&&t in n&&localStorage&&(localStorage.setItem(r.settings.REFRESH_INTERVAL,String(t)),this.settingsSubject$.next({refreshInterval:t,theme:this.getTheme(),colorScheme:this.getColorScheme()}))}setColorScheme(t){t&&Object.values(i).includes(t)&&localStorage&&localStorage.setItem(r.settings.COLOR_SCHEME,t)}getTheme(){return localStorage&&(localStorage.getItem(r.settings.THEME)||this.DEFAULT_SETTINGS.theme)}getColorScheme(){return localStorage&&(localStorage.getItem(r.settings.COLOR_SCHEME)||this.DEFAULT_SETTINGS.colorScheme)}getRefreshInterval(){return localStorage&&(Number(localStorage.getItem(r.settings.REFRESH_INTERVAL))||this.DEFAULT_SETTINGS.refreshInterval)}applyTheme(t){let s=this.document.documentElement.classList,c=!1;(t===o.SYSTEM&&window.matchMedia("(prefers-color-scheme: dark)").matches||t===o.DARK)&&(c=!0),c?(!s.contains("dark")&&s.add("dark"),this.setColorScheme(i.DARK)):(s.contains("dark")&&s.remove("dark"),this.setColorScheme(i.LIGHT))}static \u0275fac=function(s){return new(s||e)(m(g))};static \u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();export{o as a,i as b,n as c,C as d};
