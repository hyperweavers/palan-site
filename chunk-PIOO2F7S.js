import{d as o,g as B}from"./chunk-THK3ACBR.js";import{a as I}from"./chunk-GVUR4LFF.js";import{e as D}from"./chunk-J6MO7NNG.js";import{X as h,_ as O,a as E,b as U,ea as j,ka as y,q as V,r as M,v as Y}from"./chunk-ZG3MT3EK.js";var s=function(e){return e.BUY="BUY",e.SELL="SELL",e}(s||{}),v=function(e){return e.EMPLOYEE="employee",e.EMPLOYER="employer",e}(v||{});var H=(()=>{class e{portfolio$;constructor(d,u){this.portfolio$=V(d.stocks$).pipe(O(i=>i.length>0?u.getStock(i[0].vendorCode.mc.primary).pipe(Y(p=>{let a=i[0].transactions.reduce((t,r)=>r.type===s.BUY?t+r.quantity:t-r.quantity,0)||0,l=i[0].transactions.filter(t=>t.source===v.EMPLOYEE).reduce((t,r)=>r.type===s.BUY?t+r.price.value*r.quantity+(r.charges?.value||0):t-r.price.value*r.quantity-(r.charges?.value||0),0)||0,L=l/a||0,f=((p.quote?.price||0)-L)*a,x=f/l*100||0,q=[U(E({},p),{id:i[0].id||D(),transactions:i[0].transactions||[],quantity:a,averagePrice:L,investment:l,marketValue:(p.quote?.price||0)*a,totalProfitLoss:{direction:f>=0?o.UP:o.DOWN,percentage:x,value:f}})],n=0,m=0,c=0,g=0;q.map(t=>{let r=(t.quote?.price||0)*(t.quantity||0);n+=t.investment||0,m+=r,c+=(t.quote?.change?.value||0)*(t.quantity||0),g+=(t.quote?.close||0)*(t.quantity||0)});let N=c/g*100||0,P=m-n,W=P/n*100||0;return{holdings:q,investment:n,marketValue:m,dayProfitLoss:{direction:c>=0?o.UP:o.DOWN,percentage:N,value:c},totalProfitLoss:{direction:P>=0?o.UP:o.DOWN,percentage:W,value:P}}})):M({holdings:[],investment:0,marketValue:0,dayProfitLoss:{direction:o.UP,percentage:0,value:0},totalProfitLoss:{direction:o.UP,percentage:0,value:0}}))).pipe(h(1))}static \u0275fac=function(u){return new(u||e)(y(I),y(B))};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();export{s as a,v as b,H as c};
